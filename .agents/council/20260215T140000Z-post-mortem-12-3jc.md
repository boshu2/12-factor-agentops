# Post-Mortem: Epic 12-3jc — 12-Factor AgentOps v3 Pivot

**Date:** 2026-02-15
**Epic:** 12-3jc (12-Factor AgentOps Pivot v3)
**Duration:** ~2 hours (research through post-mortem)
**Mode:** quick (single-agent inline council)

## Council Verdict: WARN

| Judge | Verdict | Key Finding |
|-------|---------|-------------|
| Plan-Compliance | PASS | All 15 issues delivered. Factor VII over content budget (4,264 words vs 3,000 target) — minor. |
| Tech-Debt | WARN | 5 cleanup items identified: 00-SUMMARY needs full rewrite, stale SVG badges, Factor VII over budget, bd legacy DB warning, stale factors/README.md |
| Learnings | PASS | 5 reusable patterns extracted. Pre-mortem ROI proven. Parallel agent writing patterns documented. |

**Overall:** WARN (1 PASS + 1 WARN + 1 PASS)

### Implementation Assessment

All 15 issues closed successfully across 4 waves:
- Wave 1: Archive v1 factors with MAPPING.md
- Wave 2: Write all 12 new factors in parallel (background agents)
- Wave 3: Rewrite README with inverted adoption model
- Wave 4: Verify all 13 GOALS.yaml checks pass

Content quality is consistent across factors (2,587-4,264 words). README delivers 5-minute quickstart with zero-infrastructure entry. Archive preserves complete v1→v3 mapping.

### Concerns

1. `docs/00-SUMMARY.md` got a header patch, not a full rewrite — body still has conceptual remnants of old framing
2. `factors/README.md` (254 lines) is a stale v1 index file that should be removed or redirected
3. README badges reference SVG assets that may have been removed
4. Factor VII at 4,264 words significantly exceeds the 3,000-word target

## Learnings (from /retro)

### What Went Well
- Pre-mortem caught 3 blockers before implementation (inverted adoption, zero-infra entry, Factor VIII hero)
- 12 factors written in parallel by background agents — all completed successfully
- GOALS.yaml shell-script checks eliminated completion ambiguity (13/13 pass)
- Content budgets kept factors focused (only 1 outlier)
- 4 waves out of 50 max — clean execution

### What Was Hard
- Wave 2 agents produced inconsistent section headings (h2 vs h3, "Rule" vs "The Rule")
- GOALS.yaml check syntax didn't match actual content format (`Rule:` vs `## The Rule`)
- Stale framing references hidden in non-obvious files (CONTRIBUTING.md, tutorial links)
- zsh vs bash variable behavior differences in shell checks
- Context compaction during long RPI lifecycle

### Do Differently Next Time
- Include exact markdown templates in worker prompts (not just section names)
- Test GOALS.yaml checks against sample content before implementation
- Run stale-framing checks incrementally after each wave
- Always wrap shell checks in explicit `bash -c`

### Patterns to Reuse
1. **Pre-mortem as Plan Gate** — FAIL verdict → fix → re-run before implementation
2. **Parallel Agent Writing with Vibe Gate** — write in parallel, validate structurally, fix in batch
3. **Mechanically-Verifiable Exit Criteria** — GOALS.yaml with shell-script checks
4. **Inverted Adoption Model** — quickstart → principles, not manifesto → tooling

### Anti-Patterns to Avoid
1. **Section Name Without Format Spec** — always include exact markdown heading format
2. **Check-Then-Fix Instead of Prevent** — test checks against sample content first
3. **Assuming Shell Compatibility** — zsh and bash behave differently for counters

## Metrics

| Metric | Value |
|--------|-------|
| Issues completed | 15/15 |
| Waves used | 4/50 |
| Factor word count (avg) | 2,872 |
| Factor word count (range) | 2,587 - 4,264 |
| README word count | 1,560 |
| GOALS.yaml checks pass | 13/13 |
| Pre-mortem iterations | 2 (v1 FAIL → v2 WARN) |
| Plan iterations | 3 (v1 → v2 → v3) |
| Vibe verdict | PASS (HIGH confidence) |

## Process Improvement Proposals

| # | Area | Improvement | Evidence |
|---|------|-------------|----------|
| 1 | worker-prompts | Include exact markdown section templates in parallel agent prompts | 5/12 factors had inconsistent heading formats requiring post-wave fixes |
| 2 | verification | Test GOALS.yaml checks against sample content before implementation | `Rule:` vs `## The Rule` mismatch caught late in Wave 4 |
| 3 | shell-compat | Wrap all GOALS.yaml shell checks in explicit `bash -c` subshells | zsh counter variable behavior produced wrong results |

## Next Work

| # | Title | Type | Severity | Source |
|---|-------|------|----------|--------|
| 1 | Full rewrite of docs/00-SUMMARY.md to match v3 framing | tech-debt | medium | council-finding |
| 2 | Remove stale factors/README.md (v1 index file) | tech-debt | low | council-finding |
| 3 | Remove stale SVG badge references from README | tech-debt | low | council-finding |
| 4 | Trim Factor VII from 4,264 to ~3,000 words | improvement | low | council-finding |
| 5 | Add exact section templates to parallel agent worker prompts | process-improvement | medium | retro-pattern |
| 6 | Add GOALS.yaml check pre-validation step to /plan skill | process-improvement | medium | retro-learning |

## Status

[x] CLOSED - Work complete, learnings captured
[ ] FOLLOW-UP - Issues need addressing (create new beads)
